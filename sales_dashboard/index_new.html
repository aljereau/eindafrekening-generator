
<body>
    <header>
        <div>
            <h1>ğŸ  RyanRent Sales Dashboard</h1>
            <div class="subtitle" id="lastUpdate">Laden...</div>
        </div>
    </header>

    <div class="container">
        <!-- KPIs -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="value" id="kpiTotal">-</div>
                <div class="label">Woningen</div>
            </div>
            <div class="kpi-card">
                <div class="value" id="kpiAvailable">-</div>
                <div class="label">Beschikbaar</div>
            </div>
            <div class="kpi-card">
                <div class="value" id="kpiRented">-</div>
                <div class="label">Verhuurd</div>
            </div>
            <div class="kpi-card">
                <div class="value" id="kpiLeegstand">-</div>
                <div class="label">Leegstand</div>
            </div>
            <div class="kpi-card">
                <div class="value money" id="kpiMarge">-</div>
                <div class="label">Marge/Maand</div>
            </div>
            <div class="kpi-card">
                <div class="value money" id="kpiMargeJaar">-</div>
                <div class="label">Marge/Jaar</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="woningen">ğŸ  Woningen</button>
            <button class="tab" data-tab="binnenkort">ğŸ“… Binnenkort Vrij</button>
            <button class="tab" data-tab="eigenaren">ğŸ‘¤ Eigenaren</button>
            <button class="tab" data-tab="huurders">ğŸ‘¥ Huurders</button>
            <button class="tab" data-tab="financieel">ğŸ’° Financieel</button>
            <button class="tab" data-tab="salesprep"
                style="background: linear-gradient(135deg, #FF6B6B, #FF8E53); color: white;">ğŸ¯ Sales Prep</button>
        </div>

        <!-- Woningen Panel -->
        <div class="panel active" id="panel-woningen">
            <div class="toolbar">
                <input type="text" id="searchWoningen" placeholder="ğŸ” Zoek adres, eigenaar, huurder, plaats...">
                <select id="filterStatus">
                    <option value="">Alle status</option>
                    <option value="Beschikbaar">Beschikbaar</option>
                    <option value="Verhuurd">Verhuurd</option>
                    <option value="Leegstand">Leegstand</option>
                </select>
                <select id="filterStad">
                    <option value="">Alle steden</option>
                </select>
            </div>
            <div class="results-info"><span id="resultsCount"></span></div>
            <div class="data-table-wrapper" style="max-height: 600px; overflow-y: auto;">
                <table class="data-table" id="woningenTable">
                    <thead>
                        <tr>
                            <th data-sort="object_id">Object</th>
                            <th data-sort="adres">Adres</th>
                            <th data-sort="plaats">Plaats</th>
                            <th data-sort="eigenaar_naam">Eigenaar</th>
                            <th data-sort="huurder_naam">Huurder</th>
                            <th data-sort="marge_maand_excl_btw">Marge</th>
                            <th data-sort="beschikbaarheid_status">Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Binnenkort Beschikbaar Panel -->
        <div class="panel" id="panel-binnenkort">
            <div class="toolbar">
                <select id="filterBinnenkortDays" style="min-width:150px;">
                    <option value="30">Binnen 30 dagen</option>
                    <option value="60">Binnen 60 dagen</option>
                    <option value="90" selected>Binnen 90 dagen</option>
                    <option value="180">Binnen 6 maanden</option>
                </select>
                <input type="text" id="searchBinnenkort" placeholder="ğŸ” Zoek adres, huurder...">
            </div>
            <div class="results-info"><span id="binnenkortCount"></span></div>
            <div class="data-table-wrapper" style="max-height: 600px; overflow-y: auto;">
                <table class="data-table" id="binnenkortTable">
                    <thead>
                        <tr>
                            <th>Object</th>
                            <th>Adres</th>
                            <th>Plaats</th>
                            <th>Huurder</th>
                            <th>Einddatum</th>
                            <th>Dagen</th>
                            <th>Marge</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Eigenaren Panel -->
        <div class="panel" id="panel-eigenaren">
            <div class="toolbar">
                <input type="text" id="searchEigenaren" placeholder="ğŸ” Zoek eigenaar...">
            </div>
            <div class="results-info"><span id="eigenarenCount"></span></div>
            <div class="data-table-wrapper" style="max-height: 600px; overflow-y: auto;">
                <table class="data-table" id="eigenarenTable">
                    <thead>
                        <tr>
                            <th data-sort="naam">Naam</th>
                            <th data-sort="email">Email</th>
                            <th data-sort="telefoon">Telefoon</th>
                            <th data-sort="plaats">Plaats</th>
                            <th data-sort="count">Woningen</th>
                            <th data-sort="totalInhuur">Totaal Inhuur</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Huurders Panel -->
        <div class="panel" id="panel-huurders">
            <div class="toolbar">
                <input type="text" id="searchHuurders" placeholder="ğŸ” Zoek huurder...">
            </div>
            <div class="results-info"><span id="huurdersCount"></span></div>
            <div class="data-table-wrapper" style="max-height: 600px; overflow-y: auto;">
                <table class="data-table" id="huurdersTable">
                    <thead>
                        <tr>
                            <th data-sort="naam">Naam</th>
                            <th data-sort="type">Type</th>
                            <th data-sort="email">Email</th>
                            <th data-sort="telefoon">Telefoon</th>
                            <th data-sort="count">Woningen</th>
                            <th data-sort="totalVerhuur">Totaal Verhuur</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Financieel Panel -->
        <div class="panel" id="panel-financieel">
            <div class="toolbar">
                <input type="text" id="searchFinancieel" placeholder="ğŸ” Zoek...">
                <select id="filterFinStatus">
                    <option value="">Alle status</option>
                    <option value="Beschikbaar">Beschikbaar</option>
                    <option value="Verhuurd">Verhuurd</option>
                    <option value="Leegstand">Leegstand</option>
                </select>
                <select id="sortFinancieel">
                    <option value="marge_desc">Hoogste marge</option>
                    <option value="marge_asc">Laagste marge</option>
                    <option value="inhuur_desc">Hoogste inhuur</option>
                    <option value="verhuur_desc">Hoogste verhuur</option>
                </select>
            </div>
            <div class="data-table-wrapper" style="max-height: 600px; overflow-y: auto;">
                <table class="data-table" id="financieelTable">
                    <thead>
                        <tr>
                            <th data-sort="object_id">Object</th>
                            <th data-sort="adres">Adres</th>
                            <th data-sort="plaats">Plaats</th>
                            <th data-sort="inhuur_totaal_excl_btw">Inhuur</th>
                            <th data-sort="verhuur_totaal_excl_btw">Verhuur</th>
                            <th data-sort="marge_maand_excl_btw">Marge</th>
                            <th data-sort="marge_percentage">%</th>
                            <th data-sort="beschikbaarheid_status">Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Sales Prep Panel -->
        <div class="panel" id="panel-salesprep">
            <div class="sales-prep">
                <div class="calc-card">
                    <h3>ğŸ  Selecteer Woning</h3>
                    <div class="search-select" id="propertySearchSelect">
                        <input type="text" id="salesPropSearch" placeholder="ğŸ” Zoek object, adres, plaats...">
                        <div class="dropdown" id="salesPropDropdown"></div>
                    </div>
                    <div id="salesPropInfo" style="margin-top:1rem;"></div>
                </div>

                <div class="calc-card">
                    <h3>ğŸ¯ Klant Budget Matcher</h3>
                    <div
                        style="display:grid; grid-template-columns: 1fr 0.6fr 0.8fr 0.8fr; gap:0.25rem 0.5rem; font-size:0.75rem; color:var(--gray);">
                        <span>ğŸ“ Postcode</span><span>Max km</span><span>Min â‚¬ PPPW</span><span>Max â‚¬ PPPW</span>
                    </div>
                    <div class="budget-inputs" style="margin-top:0.25rem;">
                        <input type="text" id="targetPostcode" placeholder="3012" style="flex:1;">
                        <input type="number" id="maxDistance" placeholder="15" value="15" style="flex:0.6;">
                        <input type="number" id="budgetMin" placeholder="175" value="175" style="flex:0.8;">
                        <input type="number" id="budgetMax" placeholder="195" value="195" style="flex:0.8;">
                    </div>
                    <div
                        style="display:grid; grid-template-columns: 0.6fr 0.8fr 1fr auto; gap:0.25rem 0.5rem; font-size:0.75rem; color:var(--gray); margin-top:0.5rem;">
                        <span>Min kamers</span><span>Vrij binnen</span><span>Stad</span><span></span>
                    </div>
                    <div class="budget-inputs" style="margin-top:0.25rem;">
                        <input type="number" id="budgetRooms" placeholder="2" style="flex:0.6;">
                        <select id="availableWithin"
                            style="flex:0.8; padding:0.4rem; border:2px solid #e0e0e0; border-radius: var(--radius);">
                            <option value="0">Nu vrij</option>
                            <option value="2">2 weken</option>
                            <option value="4" selected>4 weken</option>
                            <option value="8">8 weken</option>
                            <option value="12">12 weken</option>
                        </select>
                        <select id="budgetCity"
                            style="flex:1; padding:0.4rem; border:2px solid #e0e0e0; border-radius: var(--radius);">
                            <option value="">Alle steden</option>
                        </select>
                        <button class="btn" onclick="runBudgetMatcher()" style="flex:0 0 auto;">ğŸ”</button>
                    </div>
                    <div id="matcherStatus" style="color: var(--gray); font-size: 0.8rem; margin-top: 0.5rem;"></div>
                    <div id="matcherResults" class="matcher-results" style="max-height:200px;">
                        <p style="color: var(--gray); text-align: center; font-size:0.8rem;">Vul criteria in en klik ğŸ”
                        </p>
                        </p>
                    </div>
                </div>

                <div class="calc-card">
                    <h3>ğŸ’° Prijs Calculator</h3>
                    <div class="calc-row">
                        <span class="label">Inhuur (kostprijs)</span>
                        <span class="value" id="calcInhuur">â‚¬ 0</span>
                    </div>
                    <div class="calc-row">
                        <span class="label">Target marge %</span>
                        <input type="number" class="calc-input" id="calcMargeTarget" value="15" min="0" max="100">
                    </div>
                    <div class="calc-row">
                        <span class="label">Min. verhuurprijs (kaal)</span>
                        <span class="value positive" id="calcMinVerhuur">â‚¬ 0</span>
                    </div>
                    <div class="margin-bar">
                        <div class="fill" id="marginFill" style="width: 0%"></div>
                    </div>

                    <h3 style="margin-top:1.5rem">ğŸ“¦ Maandelijkse Services (PPPW)</h3>
                    <p style="font-size:0.75rem; color:var(--gray); margin-bottom:0.5rem;">Per persoon per week Ã—
                        capaciteit Ã— 4.33 weken</p>
                    <div class="toggle-row" id="serviceToggles">
                        <button class="toggle-btn" data-service="gwe" data-type="fixed">ğŸ’¡ GWE</button>
                        <button class="toggle-btn" data-service="meubilering" data-pppw="15" data-type="pppw">ğŸ›‹ï¸
                            Meubilering â‚¬15</button>
                        <button class="toggle-btn" data-service="stoffering" data-pppw="10" data-type="pppw">ğŸª‘
                            Stoffering â‚¬10</button>
                        <button class="toggle-btn" data-service="internet" data-pppw="5" data-type="pppw">ğŸ“¶ Internet
                            â‚¬5</button>
                        <button class="toggle-btn" data-service="bedlinnen" data-pppw="3" data-type="pppw">ğŸ›ï¸ Bedlinnen
                            â‚¬3</button>
                        <button class="toggle-btn" data-service="tuinonderhoud" data-pppw="2.5" data-type="pppw">ğŸŒ¿ Tuin
                            â‚¬2.50</button>
                        <button class="toggle-btn" data-service="afvalverwerking" data-pppw="2" data-type="pppw">ğŸ—‘ï¸
                            Afval â‚¬2</button>
                    </div>

                    <div id="servicesBreakdown"
                        style="margin-top:0.75rem; padding:0.75rem; background:#f8f9fa; border-radius:var(--radius); font-size:0.85rem;">
                        <div id="servicesDetails"></div>
                    </div>

                    <h3 style="margin-top:1.5rem">ğŸ§¹ Eenmalige Kosten (bij start contract)</h3>
                    <div class="toggle-row" id="onetimeToggles">
                        <button class="toggle-btn" data-service="schoonmaak" data-onetime="250">Schoonmaak â‚¬250</button>
                        <button class="toggle-btn" data-service="schoonmaak_int" data-onetime="375">Schoonmaak Intensief
                            â‚¬375</button>
                    </div>
                    <div class="calc-row" style="margin-top:0.5rem;">
                        <span class="label" style="color:var(--gray);">Eenmalige kosten</span>
                        <span class="value" id="calcOnetime" style="color:var(--gray);">â‚¬ 0</span>
                    </div>

                    <div style="margin-top:1.5rem; padding-top:1rem; border-top: 2px solid var(--primary-light);">
                        <div class="calc-row">
                            <span class="label"><strong>Totaal verhuur/maand</strong></span>
                            <span class="value positive" id="calcTotalAdvice" style="font-size:1.25rem">â‚¬ 0</span>
                        </div>
                        <div class="calc-row" style="margin-top:0.5rem;">
                            <span class="label">PPPW (met services)</span>
                            <span class="value positive" id="calcPppwWithServices">â‚¬ 0</span>
                        </div>
                        <div class="calc-row">
                            <span class="label">PPPW (kale huur)</span>
                            <span class="value" id="calcPppwBase">â‚¬ 0</span>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h3>ğŸ“Š Scenario Vergelijking</h3>
                    <div
                        style="background:linear-gradient(135deg, #e3f2fd, #f3e5f5); padding:0.75rem; border-radius:var(--radius); margin-bottom:1rem; font-size:0.8rem;">
                        <strong>ğŸ“ Berekening:</strong><br>
                        <code
                            style="background:#fff; padding:0.2rem 0.4rem; border-radius:4px;">Verhuur = Inhuur Ã· (1 âˆ’ target%)</code><br>
                        <code
                            style="background:#fff; padding:0.2rem 0.4rem; border-radius:4px;">Marge = Verhuur âˆ’ Inhuur</code><br>
                        <code
                            style="background:#fff; padding:0.2rem 0.4rem; border-radius:4px;">Marge % = (Marge Ã· Verhuur) Ã— 100</code>
                    </div>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:0.5rem 1rem; margin-bottom:1rem;">
                        <div style="font-weight:600; color:var(--gray);">Huidig</div>
                        <div style="font-weight:600; color:var(--gray);">Nieuw</div>
                        <div><span style="font-size:0.8rem;">Verhuur</span><br><span id="calcHuidigeVerhuur">â‚¬ 0</span>
                        </div>
                        <div><input type="number" class="calc-input" id="calcNieuweVerhuur" value="0" step="50"
                                style="width:100%;"></div>
                        <div><span style="font-size:0.8rem;">âˆ’ Inhuur</span><br><span id="calcInhuurRef"
                                style="color:var(--gray);">â‚¬ 0</span>
                        </div>
                        <div><span style="color:var(--gray);" id="calcInhuurRef2">â‚¬ 0</span></div>
                        <div><span style="font-size:0.8rem;">= Marge</span><br><span id="calcHuidigeMarge">â‚¬ 0</span>
                        </div>
                        <div><span id="calcNieuweMarge">â‚¬ 0</span></div>
                        <div><span style="font-size:0.8rem;">Marge %</span><br><span id="calcHuidigeMargePct">0%</span>
                        </div>
                        <div><span id="calcNieuweMargePct">0%</span></div>
                        <div><span style="font-size:0.8rem;">PPPW</span><br><span id="calcHuidigePppw">â‚¬ 0</span></div>
                        <div><span id="calcNieuwePppw">â‚¬ 0</span></div>
                    </div>
                    <div class="calc-row" style="border-top:2px solid var(--primary-light); padding-top:0.5rem;">
                        <span class="label">Verschil/maand</span>
                        <span class="value" id="calcVerschil">â‚¬ 0</span>
                    </div>
                    <div class="calc-row">
                        <span class="label"><strong>Verschil/jaar</strong></span>
                        <span class="value" id="calcVerschilJaar" style="font-size:1.1rem">â‚¬ 0</span>
                    </div>
                    <div style="margin-top:1rem; padding-top:0.75rem; border-top:2px solid var(--primary-light);">
                        <div id="quickInfo" style="font-size:0.85rem;">
                            <p style="color: var(--gray)">Selecteer een woning om eigenaar en huurder info te zien.</p>
                        </div>
                    </div>
                </div>

                <div class="calc-card"
                    style="grid-column: span 2; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3 style="color: white;">ğŸ“‹ Contract Output</h3>
                    <p style="opacity: 0.9; font-size: 0.85rem; margin-bottom: 1rem;">
                        Wanneer je tevreden bent met de berekening, genereer contract-klare data.
                    </p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div>
                            <label style="font-size:0.8rem; opacity:0.8;">Startdatum contract</label>
                            <input type="date" id="contractStartDate" class="calc-input"
                                style="width:100%; background:rgba(255,255,255,0.9); color:#333;">
                        </div>
                        <div>
                            <label style="font-size:0.8rem; opacity:0.8;">Looptijd (maanden)</label>
                            <input type="number" id="contractDuration" class="calc-input" value="12" min="1"
                                style="width:100%; background:rgba(255,255,255,0.9); color:#333;">
                        </div>
                    </div>
                    <button class="btn" onclick="generateContractOutput()"
                        style="width:100%; background:white; color:#667eea; font-weight:600; padding:0.75rem;">
                        ğŸ“„ Genereer Contract Data
                    </button>
                    <div id="contractOutput"
                        style="margin-top:1rem; display:none; background:rgba(255,255,255,0.95); color:#333; padding:1rem; border-radius:var(--radius); font-size:0.85rem;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>

        <!-- Detail Panel -->
        <div class="detail-panel" id="detailPanel">
            <div class="detail-panel-header">
                <div style="display: flex; align-items: center;">
                    <button class="back-btn" id="panelBackBtn" onclick="goBackPanel()" style="display:none;">â†
                        Terug</button>
                    <h2 id="panelTitle">Details</h2>
                </div>
                <button class="detail-panel-close" onclick="closePanel()">&times;</button>
            </div>
            <div class="detail-panel-body" id="panelBody"></div>
        </div>

        <script src="data.js"></script>
